# The Maat Application Programming Interface

The Maat programming language as it's written in C offers a C/C++ API, it's
basically a set of C functions, types and macros. All these entities are
declared in the `maat.h` header file. Conceptually, the API is divided into
two parts, the first is called the low level API and the second one is called
the high level API. All the functions in this API are reentrant as all the
information about Maat contexts are kept in a complex dynamic structure called
`Maa`.

Used via this API on your program, a `Maa` is just a VM-level blocking thread
that executes C code in a virtual stack but you can use functions in this API
to launch the execution of non-blocking Maat code scheduled by Maat's runtime
scheduler than runs in background in an OS-thread. Still via this API you can
use some functions to directly parse and run maat code and if at that time
your program was already in a multi-threaded environment initiated by function
calls from the maat library then the current thread(probably the main) on
which you called a run to the maat code becomes part of the thread pool used
by the scheduler to multiplex the execution of language threads including that
Maat code. This means the maat code will not run instantly if they were other
language threads on the queue but you'll probably never noticed a latency.


## Virtual Stack

Like most scripting language APIs, 

## Low level MAAT API.

## High level MAAT API (Mac: Maat programming in C)

Nothing was coded yet, these are just some thoughts on the high level API

1. Building complex data structures

`str_v("string"), sv("string")` returns a maat string value

`num_v(2), nv(2)` returns a maat number value

`bool_v(void *), bv()`: should be passed a pointer to a maat value.

`av(sv("one"), nv(2), av(bv(sv("")) ... )), arr_v(...)` returns the Maat array value
`["one", 2, [false, ["kueppo", nil, "tcheukueppo"]]]`

```
Value *a = av(
   sv("one"),
   nv(2),
   av(
      bv(sv("")),
      av(
         sv("kueppo"),
         nil,
         sv("tcheukueppo")
      )
   )
);
```

`map_v(sv("a"), av(iv(2), sv("one")), iv(29), sv("twenty nine")), mv(...)` returns the Maat map value
`{ a => [2, "one"], 29 => "twenty nine"}`

Some variants which will require the Maat to parse code, generated bytecode and execute it,
all done in the thread that called the function, make sure code show be very small enough
to avoid latency.

`Value *k = m_value("[2, {one => [2, 10]}]")` returns the Maat value of what you passed as argument.

```
Value *ar = av(m_value("{kueppo => 6}"), sv(2))
```

The above should return the maat value `[{kueppo => 6}, 2]`

`false` and `true` should return the maat true and false value respectively, this should
be option and it might cause issues with `stdbool.h`.

2. Method and function calls



3. Control statements










